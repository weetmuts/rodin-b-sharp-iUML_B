<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.gmf.runtime.diagram.ui.editpolicyProviders">
      <editpolicyProvider
            class="ac.soton.eventb.statemachines.animation2.policies.TransitionEditPolicyProvider">
         <Priority
               name="Lowest">
         </Priority>
         <object
               class="ac.soton.eventb.statemachines.diagram.edit.parts.TransitionEditPart(ac.soton.eventb.statemachines.diagram)"
               id="TransitionEditPart">
         </object>
         <object
               class="ac.soton.eventb.statemachines.diagram.edit.parts.TransitionGhostEditPart(ac.soton.eventb.statemachines.diagram)"
               id="TransitionGhostEditPart">
         </object>
         <context
               editparts="TransitionEditPart, TransitionGhostEditPart">
         </context>
      </editpolicyProvider>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="true"
            locationURI="toolbar:ac.soton.eventb.emf.diagrams.toolbar?after=animations">
         <command
               commandId="ac.soton.eventb.statemachines.animation2.AnimateAction"
               icon="icons/Animate.png"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activePartId">
                  <equals
                        value="ac.soton.eventb.statemachines.diagram.part.StatemachinesDiagramEditorID">
                  </equals>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="ac.soton.eventb.statemachines.animation2.StopAction"
               icon="icons/StopAnimation.png"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activePartId">
                  <equals
                        value="ac.soton.eventb.statemachines.diagram.part.StatemachinesDiagramEditorID">
                  </equals>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            description="%command.description.animate"
            id="ac.soton.eventb.statemachines.animation2.AnimateAction"
            name="%command.name.run">
      </command>
      <command
            description="%command.description.stop"
            id="ac.soton.eventb.statemachines.animation2.StopAction"
            name="%command.name.stop">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="ac.soton.eventb.statemachines.animation2.actions.AnimateAction"
            commandId="ac.soton.eventb.statemachines.animation2.AnimateAction">
         <activeWhen>
            <with
                  variable="ac.soton.eventb.statemachines.animation2.state">
               <equals
                     value="stopped">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="ac.soton.eventb.statemachines.animation2.actions.StopAction"
            commandId="ac.soton.eventb.statemachines.animation2.StopAction">
         <activeWhen>
            <with
                  variable="ac.soton.eventb.statemachines.animation2.state">
               <equals
                     value="started">
               </equals>
            </with>
         </activeWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="ac.soton.eventb.statemachines.animation2.AnimationState">
         <variable
               name="ac.soton.eventb.statemachines.animation2.active"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>

</plugin>
